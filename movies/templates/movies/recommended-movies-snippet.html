{% load static %}

<div class="dashboard-block-element min-height-30vh">
    {% if user_recommended_movies %}
    <div class="dashboard-block-element-title">
        <h2>NOS RECOMMANDATIONS DE FILMS ({{ user_recommended_movies|length }})</h2>
    </div>
    <div class="dashboard-block-element-content flex-wrap">
    {% for user_recommended_movie in user_recommended_movies %}
    <div class="capsule width-25 margin-bottom-1rem">
            {% if user_recommended_movie.movie_image %}
                <div class="capsule-image" style="background-image: url({{ user_recommended_movie.movie_image.url }});">
                {% else %}
                <div class="capsule-image" style="background-image: url({% static 'img/nopic.jpg' %});">
            {% endif %}
            <div class="favorite-wrapper">
                <i class="favorite {% if user_recommended_movie in user_favorite_movies %}press{% endif %}" onclick="favorite('user_recommended_movie_{{ user_recommended_movie.pk }}',{{ user_recommended_movie.pk }}, 'movie')" id="user_recommended_movie_{{ user_recommended_movie.pk }}"></i>
            </div>
            </div>
            <div class="capsule-text">
                <a href="{% url 'movies:movies_detail' slug=user_recommended_movie.slug pk=user_recommended_movie.pk %}">
                <h2>{{ user_recommended_movie|truncatechars:18 }}</h2>
                </a>
                <p>Sorti en {{ user_recommended_movie.release_year }}</p>
            </div>
    </div>
    {% endfor %}
    </div>
    {% else %}
    <div class="capsule justify-content-center margin-auto flex-wrap">
        {% if user.is_authenticated %}
            <h2 class="margin-1rem width-100 text-align-center">Nous n'avons aucune recommandation de films pour vous. </h2>
            <br>
            <h2 class="margin-1rem width-100 text-align-center">Pensez à ajouter des personnalités à vos favoris.</h2>
        {% else %}
            <h2>Identifiez-vous pour bénéficier de recommandations de films.</h2>
        {% endif %}
    </div>
    {% endif %}
</div>